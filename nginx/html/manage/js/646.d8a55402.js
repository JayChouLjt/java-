"use strict";(self["webpackChunkmusic_manage"]=self["webpackChunkmusic_manage"]||[]).push([[646],{179:function(e,t,l){l.d(t,{JO:function(){return o},c6:function(){return n},wC:function(){return a}});var o;(function(e){e["BOFANG"]="#icon-bofanganniu",e["ZANTING"]="#icon-zanting"})(o||(o={}));const n="music";var a;(function(e){e["Home"]="/home",e["Info"]="/info",e["Song"]="/song",e["Singer"]="/singer",e["SongList"]="/songList",e["ListSong"]="/listSong",e["Comment"]="/Comment",e["Consumer"]="/consumer",e["Collect"]="/collect",e["Error"]="/404",e["SignIn"]="/",e["SignOut"]="0"})(a||(a={}))},8045:function(e,t,l){l.d(t,{Z:function(){return i}});var o=l(3396),n=l(4870),a=l(179);function i(){const{proxy:e}=(0,o.FN)(),t=(0,n.iH)(["jpg","jpeg","png","gif"]);function l(e){return 0===e?"女":1===e?"男":2===e?"组合":3===e?"不明":"男"===e||"女"===e?e:void 0}function i(l){const o=2,n=l.size/1024/1024<o,a=t.value.includes(l.type.replace(/image\//,""));return a||e.$message.error(`图片只支持 ${t.value.join("、")} 格式!`),n||e.$message.error(`上传头像图片大小不能超过 ${o}MB!`),a&&n}function r(t){const l=10,o=t.size/1024/1024<l,n=t.name.substring(t.name.lastIndexOf(".")+1),a="mp3"===n;return a||e.$message({message:"上传文件只能是mp3格式！",type:"error"}),o||e.$message.error(`上传头像图片大小不能超过 ${l}MB!`),a&&o}function u(t,l){switch(t){case a.wC.Song:case a.wC.ListSong:case a.wC.Comment:case a.wC.Consumer:case a.wC.Collect:e.$router.push({path:l.path,query:l.query});break;case a.wC.Home:case a.wC.SignIn:case a.wC.SignOut:case a.wC.Info:case a.wC.Singer:case a.wC.SongList:case a.wC.Error:default:e.$router.push({path:l.path});break}}function s(t=-1){e.$router.go(t)}return{changeSex:l,routerManager:u,goBack:s,beforeImgUpload:i,beforeSongUpload:r}}},1937:function(e,t,l){l.d(t,{Z:function(){return g}});var o=l(3396);const n=(0,o._)("div",{class:"del-dialog-cnt",align:"center"},"删除不可恢复，是否确定删除？",-1),a={class:"dialog-footer"},i=(0,o.Uk)("取 消"),r=(0,o.Uk)("确 定");function u(e,t,l,u,s,c){const d=(0,o.up)("el-button"),m=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(m,{title:"提示",modelValue:e.centerDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=t=>e.centerDialogVisible=t),width:"300px",center:""},{footer:(0,o.w5)((()=>[(0,o._)("span",a,[(0,o.Wm)(d,{onClick:e.cancelRow},{default:(0,o.w5)((()=>[i])),_:1},8,["onClick"]),(0,o.Wm)(d,{type:"primary",onClick:e.confirm},{default:(0,o.w5)((()=>[r])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[n])),_:1},8,["modelValue"])])}var s=l(4870),c=(0,o.aZ)({props:{delVisible:Boolean},emits:["cancelRow","confirm"],setup(e){const{proxy:t}=(0,o.FN)(),{delVisible:l}=(0,s.BK)(e),n=(0,s.iH)(l.value);function a(){t.$emit("cancelRow",!1)}function i(){t.$emit("confirm",null)}return(0,o.YP)(l,(e=>{n.value=e})),{centerDialogVisible:n,cancelRow:a,confirm:i}}}),d=l(89);const m=(0,d.Z)(c,[["render",u]]);var g=m},5646:function(e,t,l){l.r(t),l.d(t,{default:function(){return L}});var o=l(3396),n=l(7139);const a={class:"container"},i={class:"handle-box"},r=(0,o.Uk)("批量删除"),u=(0,o.Uk)("添加歌单"),s=["src"],c=(0,o.Uk)("更新图片"),d={style:{height:"100px",overflow:"scroll"}},m=(0,o.Uk)("内容"),g=(0,o.Uk)("评论"),p=(0,o.Uk)("编辑"),f=(0,o.Uk)("删除"),w={class:"dialog-footer"},C=(0,o.Uk)("取 消"),h=(0,o.Uk)("确 定"),b={class:"dialog-footer"},y=(0,o.Uk)("取 消"),v=(0,o.Uk)("确 定");function V(e,t,l,V,W,k){const _=(0,o.up)("el-button"),U=(0,o.up)("el-input"),S=(0,o.up)("el-table-column"),F=(0,o.up)("el-upload"),x=(0,o.up)("el-table"),$=(0,o.up)("el-pagination"),L=(0,o.up)("el-form-item"),I=(0,o.up)("el-form"),D=(0,o.up)("el-dialog"),H=(0,o.up)("yin-del-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",a,[(0,o._)("div",i,[(0,o.Wm)(_,{onClick:e.deleteAll},{default:(0,o.w5)((()=>[r])),_:1},8,["onClick"]),(0,o.Wm)(U,{modelValue:e.searchWord,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchWord=t),placeholder:"筛选关键词"},null,8,["modelValue"]),(0,o.Wm)(_,{type:"primary",onClick:t[1]||(t[1]=t=>e.centerDialogVisible=!0)},{default:(0,o.w5)((()=>[u])),_:1})]),(0,o.Wm)(x,{height:"550px",border:"",size:"small",data:e.data,onSelectionChange:e.handleSelectionChange},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{type:"selection",width:"40",align:"center"}),(0,o.Wm)(S,{label:"ID",prop:"id",width:"50",align:"center"}),(0,o.Wm)(S,{label:"歌单图片",width:"110",align:"center"},{default:(0,o.w5)((t=>[(0,o._)("img",{src:e.attachImageUrl(t.row.pic),style:{width:"80px"}},null,8,s),(0,o.Wm)(F,{action:e.uploadUrl(t.row.id),"show-file-list":!1,"on-success":e.handleImgSuccess,"before-upload":e.beforeImgUpload},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[c])),_:1})])),_:2},1032,["action","on-success","before-upload"])])),_:1}),(0,o.Wm)(S,{prop:"title",label:"标题",width:"200"}),(0,o.Wm)(S,{label:"简介"},{default:(0,o.w5)((e=>[(0,o._)("p",d,(0,n.zw)(e.row.introduction),1)])),_:1}),(0,o.Wm)(S,{label:"风格",prop:"style",width:"100"}),(0,o.Wm)(S,{label:"内容",width:"90",align:"center"},{default:(0,o.w5)((t=>[(0,o.Wm)(_,{onClick:l=>e.goContentPage(t.row.id)},{default:(0,o.w5)((()=>[m])),_:2},1032,["onClick"])])),_:1}),(0,o.Wm)(S,{label:"评论",width:"90",align:"center"},{default:(0,o.w5)((t=>[(0,o.Wm)(_,{onClick:l=>e.goCommentPage(t.row.id)},{default:(0,o.w5)((()=>[g])),_:2},1032,["onClick"])])),_:1}),(0,o.Wm)(S,{label:"操作",width:"160",align:"center"},{default:(0,o.w5)((t=>[(0,o.Wm)(_,{onClick:l=>e.editRow(t.row)},{default:(0,o.w5)((()=>[p])),_:2},1032,["onClick"]),(0,o.Wm)(_,{type:"danger",onClick:l=>e.deleteRow(t.row.id)},{default:(0,o.w5)((()=>[f])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,o.Wm)($,{class:"pagination",background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.tableData.length,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onCurrentChange"])]),(0,o.Wm)(D,{title:"添加歌单",modelValue:e.centerDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=t=>e.centerDialogVisible=t)},{footer:(0,o.w5)((()=>[(0,o._)("span",w,[(0,o.Wm)(_,{onClick:t[5]||(t[5]=t=>e.centerDialogVisible=!1)},{default:(0,o.w5)((()=>[C])),_:1}),(0,o.Wm)(_,{type:"primary",onClick:e.addsongList},{default:(0,o.w5)((()=>[h])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(I,{"label-width":"70px",model:e.registerForm},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{label:"歌单名",prop:"title"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{modelValue:e.registerForm.title,"onUpdate:modelValue":t[2]||(t[2]=t=>e.registerForm.title=t)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(L,{label:"歌单介绍",prop:"introduction"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{modelValue:e.registerForm.introduction,"onUpdate:modelValue":t[3]||(t[3]=t=>e.registerForm.introduction=t)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(L,{label:"风格",prop:"style"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{modelValue:e.registerForm.style,"onUpdate:modelValue":t[4]||(t[4]=t=>e.registerForm.style=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,o.Wm)(D,{title:"编辑",modelValue:e.editVisible,"onUpdate:modelValue":t[11]||(t[11]=t=>e.editVisible=t)},{footer:(0,o.w5)((()=>[(0,o._)("span",b,[(0,o.Wm)(_,{onClick:t[10]||(t[10]=t=>e.editVisible=!1)},{default:(0,o.w5)((()=>[y])),_:1}),(0,o.Wm)(_,{type:"primary",onClick:e.saveEdit},{default:(0,o.w5)((()=>[v])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(I,{model:e.editForm},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{label:"标题"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{modelValue:e.editForm.title,"onUpdate:modelValue":t[7]||(t[7]=t=>e.editForm.title=t)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(L,{label:"简介"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{type:"textarea",modelValue:e.editForm.introduction,"onUpdate:modelValue":t[8]||(t[8]=t=>e.editForm.introduction=t)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(L,{label:"风格"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{modelValue:e.editForm.style,"onUpdate:modelValue":t[9]||(t[9]=t=>e.editForm.style=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,o.Wm)(H,{delVisible:e.delVisible,onConfirm:e.confirm,onCancelRow:t[12]||(t[12]=t=>e.delVisible=t)},null,8,["delVisible","onConfirm"])],64)}var W=l(4870),k=l(8045),_=l(2167),U=l(179),S=l(1937),F=(0,o.aZ)({components:{YinDelDialog:S.Z},setup(){const{proxy:e}=(0,o.FN)(),{routerManager:t,beforeImgUpload:l}=(0,k.Z)(),n=(0,W.iH)([]),a=(0,W.iH)([]),i=(0,W.iH)(5),r=(0,W.iH)(1),u=(0,o.Fl)((()=>n.value.slice((r.value-1)*i.value,r.value*i.value))),s=(0,W.iH)("");async function c(){n.value=[],a.value=[];const e=await _.x.getSongList();n.value=e.data,a.value=e.data,r.value=1}function d(e){r.value=e}function m(e){return _.x.attachImageUrl(`/songList/img/update?id=${e}`)}function g(t,l){e.$message({message:t.message,type:t.type}),t.success&&c()}function p(l){const o=(0,W.qj)([{path:U.wC.SongList,name:"歌单管理"},{path:"",name:"歌单内容"}]);e.$store.commit("setBreadcrumbList",o),t(U.wC.ListSong,{path:U.wC.ListSong,query:{id:l}})}function f(l){const o=(0,W.qj)([{path:U.wC.SongList,name:"歌单管理"},{path:"",name:"评论详情"}]);e.$store.commit("setBreadcrumbList",o),t(U.wC.Comment,{path:U.wC.Comment,query:{id:l,type:1}})}(0,o.YP)(s,(()=>{if(""===s.value)n.value=a.value;else{n.value=[];for(let e of a.value)e.title.includes(s.value)&&n.value.push(e)}})),c();const w=(0,W.iH)(!1),C=(0,W.qj)({title:"",introduction:"",style:""});async function h(){let t=C.title,l=C.introduction,o=C.style;const n=await _.x.setSongList({title:t,introduction:l,style:o});e.$message({message:n.message,type:n.type}),n.success&&(c(),C.title="",C.introduction="",C.style=""),w.value=!1}const b=(0,W.iH)(!1),y=(0,W.qj)({id:"",title:"",pic:"",introduction:"",style:""});function v(e){S.value=e.id,y.id=e.id,y.title=e.title,y.pic=e.pic,y.introduction=e.introduction,y.style=e.style,b.value=!0}async function V(){let t=y.id,l=y.title,o=y.introduction,n=y.style;const a=await _.x.updateSongListMsg({id:t,title:l,introduction:o,style:n});e.$message({message:a.message,type:a.type}),a.success&&c(),b.value=!1}const S=(0,W.iH)(-1),F=(0,W.iH)([]),x=(0,W.iH)(!1);async function $(){const t=await _.x.deleteSongList(S.value);e.$message({message:t.message,type:t.type}),t.success&&c(),x.value=!1}function L(e){S.value=e,x.value=!0}function I(e){F.value=e}function D(){for(let e of F.value)L(e.id),$();F.value=[]}return{searchWord:s,data:u,tableData:n,centerDialogVisible:w,editVisible:b,delVisible:x,pageSize:i,currentPage:r,registerForm:C,editForm:y,addsongList:h,deleteAll:D,handleSelectionChange:I,handleImgSuccess:g,beforeImgUpload:l,saveEdit:V,attachImageUrl:_.x.attachImageUrl,uploadUrl:m,editRow:v,handleCurrentChange:d,confirm:$,deleteRow:L,goContentPage:p,goCommentPage:f}}}),x=l(89);const $=(0,x.Z)(F,[["render",V]]);var L=$}}]);
//# sourceMappingURL=646.d8a55402.js.map