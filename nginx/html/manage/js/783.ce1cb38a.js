"use strict";(self["webpackChunkmusic_manage"]=self["webpackChunkmusic_manage"]||[]).push([[783],{179:function(e,l,t){t.d(l,{JO:function(){return a},c6:function(){return n},wC:function(){return o}});var a;(function(e){e["BOFANG"]="#icon-bofanganniu",e["ZANTING"]="#icon-zanting"})(a||(a={}));const n="music";var o;(function(e){e["Home"]="/home",e["Info"]="/info",e["Song"]="/song",e["Singer"]="/singer",e["SongList"]="/songList",e["ListSong"]="/listSong",e["Comment"]="/Comment",e["Consumer"]="/consumer",e["Collect"]="/collect",e["Error"]="/404",e["SignIn"]="/",e["SignOut"]="0"})(o||(o={}))},8045:function(e,l,t){t.d(l,{Z:function(){return i}});var a=t(3396),n=t(4870),o=t(179);function i(){const{proxy:e}=(0,a.FN)(),l=(0,n.iH)(["jpg","jpeg","png","gif"]);function t(e){return 0===e?"女":1===e?"男":2===e?"组合":3===e?"不明":"男"===e||"女"===e?e:void 0}function i(t){const a=2,n=t.size/1024/1024<a,o=l.value.includes(t.type.replace(/image\//,""));return o||e.$message.error(`图片只支持 ${l.value.join("、")} 格式!`),n||e.$message.error(`上传头像图片大小不能超过 ${a}MB!`),o&&n}function r(l){const t=10,a=l.size/1024/1024<t,n=l.name.substring(l.name.lastIndexOf(".")+1),o="mp3"===n;return o||e.$message({message:"上传文件只能是mp3格式！",type:"error"}),a||e.$message.error(`上传头像图片大小不能超过 ${t}MB!`),o&&a}function u(l,t){switch(l){case o.wC.Song:case o.wC.ListSong:case o.wC.Comment:case o.wC.Consumer:case o.wC.Collect:e.$router.push({path:t.path,query:t.query});break;case o.wC.Home:case o.wC.SignIn:case o.wC.SignOut:case o.wC.Info:case o.wC.Singer:case o.wC.SongList:case o.wC.Error:default:e.$router.push({path:t.path});break}}function d(l=-1){e.$router.go(l)}return{changeSex:t,routerManager:u,goBack:d,beforeImgUpload:i,beforeSongUpload:r}}},2024:function(e,l,t){function a(e){if(null==e||""==e)return"";const l=new Date(e),t=l.getFullYear(),a=l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1,n=l.getDate()<10?"0"+l.getDate():l.getDate();return t+"-"+a+"-"+n}function n(e){const l=e.split("\n"),t=/\[\d{2}:\d{2}.(\d{3}|\d{2})\]/g,a=[];if(!/\[.+\]/.test(e))return[e];for(const n of l)if(t.test(n)){const e=n.replace(t,"");a.push(e)}return a}t.d(l,{o:function(){return a},z:function(){return n}})},1937:function(e,l,t){t.d(l,{Z:function(){return g}});var a=t(3396);const n=(0,a._)("div",{class:"del-dialog-cnt",align:"center"},"删除不可恢复，是否确定删除？",-1),o={class:"dialog-footer"},i=(0,a.Uk)("取 消"),r=(0,a.Uk)("确 定");function u(e,l,t,u,d,c){const s=(0,a.up)("el-button"),m=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(m,{title:"提示",modelValue:e.centerDialogVisible,"onUpdate:modelValue":l[0]||(l[0]=l=>e.centerDialogVisible=l),width:"300px",center:""},{footer:(0,a.w5)((()=>[(0,a._)("span",o,[(0,a.Wm)(s,{onClick:e.cancelRow},{default:(0,a.w5)((()=>[i])),_:1},8,["onClick"]),(0,a.Wm)(s,{type:"primary",onClick:e.confirm},{default:(0,a.w5)((()=>[r])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[n])),_:1},8,["modelValue"])])}var d=t(4870),c=(0,a.aZ)({props:{delVisible:Boolean},emits:["cancelRow","confirm"],setup(e){const{proxy:l}=(0,a.FN)(),{delVisible:t}=(0,d.BK)(e),n=(0,d.iH)(t.value);function o(){l.$emit("cancelRow",!1)}function i(){l.$emit("confirm",null)}return(0,a.YP)(t,(e=>{n.value=e})),{centerDialogVisible:n,cancelRow:o,confirm:i}}}),s=t(89);const m=(0,s.Z)(c,[["render",u]]);var g=m},8783:function(e,l,t){t.r(l),t.d(l,{default:function(){return N}});var a=t(3396),n=t(7139);const o={class:"container"},i={class:"handle-box"},r=(0,a.Uk)("批量删除"),u=(0,a.Uk)("添加歌手"),d={class:"singer-img"},c=["src"],s=(0,a.Uk)("更新图片"),m={style:{height:"100px",overflow:"scroll"}},g=(0,a.Uk)("歌曲管理"),p=(0,a.Uk)("编辑"),f=(0,a.Uk)("删除"),w=(0,a.Uk)("女"),b=(0,a.Uk)("男"),h=(0,a.Uk)("保密"),W=(0,a.Uk)("组合"),_=(0,a.Uk)("不明"),V={class:"dialog-footer"},C=(0,a.Uk)("取 消"),v=(0,a.Uk)("确 定"),k=(0,a.Uk)("女"),U=(0,a.Uk)("男"),x=(0,a.Uk)("保密"),y=(0,a.Uk)("组合"),S=(0,a.Uk)("不明"),F={class:"dialog-footer"},D=(0,a.Uk)("取 消"),I=(0,a.Uk)("确 定");function $(e,l,t,$,H,z){const R=(0,a.up)("el-button"),q=(0,a.up)("el-input"),B=(0,a.up)("el-table-column"),Z=(0,a.up)("el-upload"),M=(0,a.up)("el-table"),j=(0,a.up)("el-pagination"),L=(0,a.up)("el-form-item"),N=(0,a.up)("el-radio"),P=(0,a.up)("el-radio-group"),A=(0,a.up)("el-date-picker"),O=(0,a.up)("el-form"),Y=(0,a.up)("el-dialog"),E=(0,a.up)("yin-del-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a._)("div",i,[(0,a.Wm)(R,{onClick:e.deleteAll},{default:(0,a.w5)((()=>[r])),_:1},8,["onClick"]),(0,a.Wm)(q,{placeholder:"筛选歌手",modelValue:e.searchWord,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchWord=l)},null,8,["modelValue"]),(0,a.Wm)(R,{type:"primary",onClick:l[1]||(l[1]=l=>e.centerDialogVisible=!0)},{default:(0,a.w5)((()=>[u])),_:1})]),(0,a.Wm)(M,{height:"550px",border:"",size:"small",data:e.data,onSelectionChange:e.handleSelectionChange},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{type:"selection",width:"40",align:"center"}),(0,a.Wm)(B,{label:"ID",prop:"id",width:"50",align:"center"}),(0,a.Wm)(B,{label:"歌手图片",prop:"pic",width:"110",align:"center"},{default:(0,a.w5)((l=>[(0,a._)("div",d,[(0,a._)("img",{src:e.attachImageUrl(l.row.pic),style:{width:"100%"}},null,8,c)]),(0,a.Wm)(Z,{action:e.uploadUrl(l.row.id),"show-file-list":!1,"on-success":e.handleImgSuccess,"before-upload":e.beforeImgUpload},{default:(0,a.w5)((()=>[(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[s])),_:1})])),_:2},1032,["action","on-success","before-upload"])])),_:1}),(0,a.Wm)(B,{label:"歌手",prop:"name",width:"120",align:"center"}),(0,a.Wm)(B,{label:"性别",prop:"sex",width:"60",align:"center"},{default:(0,a.w5)((l=>[(0,a._)("div",null,(0,n.zw)(e.changeSex(l.row.sex)),1)])),_:1}),(0,a.Wm)(B,{label:"出生",prop:"birth",width:"120",align:"center"},{default:(0,a.w5)((l=>[(0,a._)("div",null,(0,n.zw)(e.getBirth(l.row.birth)),1)])),_:1}),(0,a.Wm)(B,{label:"地区",prop:"location",width:"100",align:"center"}),(0,a.Wm)(B,{label:"简介",prop:"introduction"},{default:(0,a.w5)((e=>[(0,a._)("p",m,(0,n.zw)(e.row.introduction),1)])),_:1}),(0,a.Wm)(B,{label:"歌曲管理",width:"120",align:"center"},{default:(0,a.w5)((l=>[(0,a.Wm)(R,{onClick:t=>e.goSongPage(l.row)},{default:(0,a.w5)((()=>[g])),_:2},1032,["onClick"])])),_:1}),(0,a.Wm)(B,{label:"操作",width:"160",align:"center"},{default:(0,a.w5)((l=>[(0,a.Wm)(R,{onClick:t=>e.editRow(l.row)},{default:(0,a.w5)((()=>[p])),_:2},1032,["onClick"]),(0,a.Wm)(R,{type:"danger",onClick:t=>e.deleteRow(l.row.id)},{default:(0,a.w5)((()=>[f])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,a.Wm)(j,{class:"pagination",background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.tableData.length,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onCurrentChange"])]),(0,a.Wm)(Y,{title:"添加歌手",modelValue:e.centerDialogVisible,"onUpdate:modelValue":l[8]||(l[8]=l=>e.centerDialogVisible=l)},{footer:(0,a.w5)((()=>[(0,a._)("span",V,[(0,a.Wm)(R,{onClick:l[7]||(l[7]=l=>e.centerDialogVisible=!1)},{default:(0,a.w5)((()=>[C])),_:1}),(0,a.Wm)(R,{type:"primary",onClick:e.addsinger},{default:(0,a.w5)((()=>[v])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(O,{"label-width":"80px",model:e.registerForm,rules:e.singerRule},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{label:"歌手名",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:e.registerForm.name,"onUpdate:modelValue":l[2]||(l[2]=l=>e.registerForm.name=l)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"性别",prop:"sex"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{modelValue:e.registerForm.sex,"onUpdate:modelValue":l[3]||(l[3]=l=>e.registerForm.sex=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{label:0},{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(N,{label:1},{default:(0,a.w5)((()=>[b])),_:1}),(0,a.Wm)(N,{label:2},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(N,{label:2},{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)(N,{label:3},{default:(0,a.w5)((()=>[_])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"故乡",prop:"location"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:e.registerForm.location,"onUpdate:modelValue":l[4]||(l[4]=l=>e.registerForm.location=l)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"出生日期",prop:"birth"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{type:"date",modelValue:e.registerForm.birth,"onUpdate:modelValue":l[5]||(l[5]=l=>e.registerForm.birth=l)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"歌手介绍",prop:"introduction"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{type:"textarea",modelValue:e.registerForm.introduction,"onUpdate:modelValue":l[6]||(l[6]=l=>e.registerForm.introduction=l)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,a.Wm)(Y,{title:"编辑",modelValue:e.editVisible,"onUpdate:modelValue":l[15]||(l[15]=l=>e.editVisible=l)},{footer:(0,a.w5)((()=>[(0,a._)("span",F,[(0,a.Wm)(R,{onClick:l[14]||(l[14]=l=>e.editVisible=!1)},{default:(0,a.w5)((()=>[D])),_:1}),(0,a.Wm)(R,{type:"primary",onClick:e.saveEdit},{default:(0,a.w5)((()=>[I])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(O,{"label-width":"60px",model:e.editForm,rules:e.singerRule},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{label:"歌手",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:e.editForm.name,"onUpdate:modelValue":l[9]||(l[9]=l=>e.editForm.name=l)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"性别",prop:"sex"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{modelValue:e.editForm.sex,"onUpdate:modelValue":l[10]||(l[10]=l=>e.editForm.sex=l)},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{label:0},{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(N,{label:1},{default:(0,a.w5)((()=>[U])),_:1}),(0,a.Wm)(N,{label:2},{default:(0,a.w5)((()=>[x])),_:1}),(0,a.Wm)(N,{label:2},{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)(N,{label:3},{default:(0,a.w5)((()=>[S])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"出生",prop:"birth"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{type:"date",modelValue:e.editForm.birth,"onUpdate:modelValue":l[11]||(l[11]=l=>e.editForm.birth=l)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"地区",prop:"location"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:e.editForm.location,"onUpdate:modelValue":l[12]||(l[12]=l=>e.editForm.location=l)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(L,{label:"简介",prop:"introduction"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{type:"textarea",modelValue:e.editForm.introduction,"onUpdate:modelValue":l[13]||(l[13]=l=>e.editForm.introduction=l)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,a.Wm)(E,{delVisible:e.delVisible,onConfirm:e.confirm,onCancelRow:l[16]||(l[16]=l=>e.delVisible=l)},null,8,["delVisible","onConfirm"])],64)}var H=t(4870),z=t(8045),R=t(1937),q=t(2167),B=t(179),Z=t(2024),M=(0,a.aZ)({components:{YinDelDialog:R.Z},setup(){const{proxy:e}=(0,a.FN)(),{changeSex:l,routerManager:t,beforeImgUpload:n}=(0,z.Z)(),o=(0,H.iH)([]),i=(0,H.iH)([]),r=(0,H.iH)(5),u=(0,H.iH)(1),d=(0,a.Fl)((()=>o.value.slice((u.value-1)*r.value,u.value*r.value))),c=(0,H.iH)("");async function s(){o.value=[],i.value=[];const e=await q.x.getAllSinger();o.value=e.data,i.value=e.data,u.value=1}function m(e){u.value=e}function g(e){return q.x.attachImageUrl(`/singer/avatar/update?id=${e}`)}function p(l){const a=(0,H.qj)([{path:B.wC.Singer,name:"歌手管理"},{path:"",name:"歌曲信息"}]);e.$store.commit("setBreadcrumbList",a),t(B.wC.Song,{path:B.wC.Song,query:{id:l.id,name:l.name}})}(0,a.YP)(c,(()=>{if(""===c.value)o.value=i.value;else{o.value=[];for(let e of i.value)e.name.includes(c.value)&&o.value.push(e)}})),s();const f=(0,H.iH)(!1),w=(0,H.qj)({name:"",sex:"",birth:new Date,location:"",introduction:""}),b=(0,H.qj)({name:[{required:!0,trigger:"change"}],sex:[{required:!0,trigger:"change"}]});async function h(){let l=(0,Z.o)(w.birth),t=w.name,a=w.sex,n=l,o=w.location,i=w.introduction;const r=await q.x.setSinger({name:t,sex:a,birth:n,location:o,introduction:i});e.$message({message:r.message,type:r.type}),r.success&&(s(),w.birth=new Date,w.name="",w.sex="",w.location="",w.introduction=""),f.value=!1}const W=(0,H.iH)(!1),_=(0,H.qj)({id:"",name:"",sex:"",pic:"",birth:new Date,location:"",introduction:""});function V(e){W.value=!0,_.id=e.id,_.name=e.name,_.sex=e.sex,_.pic=e.pic,_.birth=e.birth,_.location=e.location,_.introduction=e.introduction}async function C(){try{let l=(0,Z.o)(new Date(_.birth)),t=_.id,a=_.name,n=_.sex,o=l,i=_.location,r=_.introduction;const u=await q.x.updateSingerMsg({id:t,name:a,sex:n,birth:o,location:i,introduction:r});e.$message({message:u.message,type:u.type}),u.success&&s(),W.value=!1}catch(l){console.error(l)}}function v(l,t){e.$message({message:l.message,type:l.type}),l.success&&s()}const k=(0,H.iH)(-1),U=(0,H.iH)([]),x=(0,H.iH)(!1);async function y(){const l=await q.x.deleteSinger(k.value);e.$message({message:l.message,type:l.type}),l.success&&s(),x.value=!1}function S(e){k.value=e,x.value=!0}function F(e){U.value=e}function D(){for(let e of U.value)S(e.id),y();U.value=[]}return{searchWord:c,data:d,tableData:o,centerDialogVisible:f,editVisible:W,delVisible:x,pageSize:r,currentPage:u,registerForm:w,editForm:_,singerRule:b,deleteAll:D,handleSelectionChange:F,handleImgSuccess:v,beforeImgUpload:n,saveEdit:C,attachImageUrl:q.x.attachImageUrl,changeSex:l,getBirth:Z.o,uploadUrl:g,goSongPage:p,editRow:V,handleCurrentChange:m,addsinger:h,confirm:y,deleteRow:S}}}),j=t(89);const L=(0,j.Z)(M,[["render",$],["__scopeId","data-v-145096c8"]]);var N=L}}]);
//# sourceMappingURL=783.ce1cb38a.js.map