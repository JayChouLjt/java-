"use strict";(self["webpackChunkmusic_client"]=self["webpackChunkmusic_client"]||[]).push([[0],{2024:function(e,t,n){function i(e){if(null==e||""==e)return"";const t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate();return n+"-"+i+"-"+a}function a(e){if(null==e||""==e)return"";const t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),s=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),l=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return n+"-"+i+"-"+a+" "+s+":"+o+":"+l}function s(e){let t=e.split("\n");const n=/\[\d{2}:\d{2}.(\d{3}|\d{2})\]/g,i=[];if(!/\[.+\]/.test(e))return[[0,e]];while(!n.test(t[0]))t=t.slice(1);0===t[t.length-1].length&&t.pop();for(const a of t){const e=a.match(n),t=a.replace(n,"");for(const n of e){const e=n.slice(1,-1).split(":");""!==t&&i.push([60*parseInt(e[0],10)+parseFloat(e[1]),t])}}return i.sort(((e,t)=>e[0]-t[0])),i}function o(e){let t=parseInt(e),n=0,i=0;t>60&&(n=parseInt((t/60).toString()),t=parseInt((t%60).toString()),n>60&&(i=parseInt((n/60).toString()),n=60));let a="";return a=parseInt(t.toString())<10?"0:0"+parseInt(t.toString()):"0:"+parseInt(t.toString()),n>0&&(a=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),a=parseInt(n.toString())+":"+a),i>0&&(a=parseInt(t.toString())<10?"0"+parseInt(t.toString()):parseInt(t.toString()).toString(),a=parseInt(i.toString())+":"+parseInt(n.toString())+":"+a),a}n.d(t,{oy:function(){return i},p6:function(){return a},zu:function(){return s},ZC:function(){return o}})},3089:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(3396);const a={class:"icon","aria-hidden":"true"},s=["xlink:href"];function o(e,t,n,o,l,r){return(0,i.wg)(),(0,i.iD)("svg",a,[(0,i._)("use",{"xlink:href":e.icon},null,8,s)])}var l=(0,i.aZ)({props:{icon:String}}),r=n(89);const c=(0,r.Z)(l,[["render",o]]);var u=c},4e3:function(e,t,n){n.r(t),n.d(t,{default:function(){return me}});var i=n(3396),a=n(7139),s=n(9242);const o={class:"yin-header"},l={class:"header-search"};function r(e,t,n,r,c,u){const d=(0,i.up)("yin-icon"),g=(0,i.up)("yin-header-nav"),m=(0,i.up)("el-input"),h=(0,i.up)("el-image"),p=(0,i.up)("el-dropdown-item"),y=(0,i.up)("el-dropdown-menu"),I=(0,i.up)("el-dropdown");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",{class:"header-logo",onClick:t[0]||(t[0]=t=>e.goPage())},[(0,i.Wm)(d,{icon:e.iconList.ERJI},null,8,["icon"]),(0,i._)("span",null,(0,a.zw)(e.musicName),1)]),(0,i.Wm)(g,{class:"yin-header-nav",styleList:e.headerNavList,activeName:e.activeNavName,onClick:e.goPage},null,8,["styleList","activeName","onClick"]),(0,i._)("div",l,[(0,i.Wm)(m,{placeholder:"搜索","prefix-icon":e.Search,modelValue:e.keywords,"onUpdate:modelValue":t[1]||(t[1]=t=>e.keywords=t),onKeyup:t[2]||(t[2]=(0,s.D2)((t=>e.goSearch()),["enter"]))},null,8,["prefix-icon","modelValue"])]),e.token?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(g,{key:0,styleList:e.signList,activeName:e.activeNavName,onClick:e.goPage},null,8,["styleList","activeName","onClick"])),e.token?((0,i.wg)(),(0,i.j4)(I,{key:1,class:"user-wrap",trigger:"click"},{dropdown:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.menuList,((t,n)=>((0,i.wg)(),(0,i.j4)(p,{key:n,onClick:(0,s.iM)((n=>e.goMenuList(t.path)),["stop"])},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(t.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"user",fit:"contain",src:e.attachImageUrl(e.userPic)},null,8,["src"])])),_:1})):(0,i.kq)("",!0)])}var c=n(4870),u=n(8541),d=n(9749),g=n(3089);const m={class:"yin-header-nav"},h=["onClick"];function p(e,t,n,s,o,l){return(0,i.wg)(),(0,i.iD)("ul",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.styleList,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,a.C_)({active:t.name===e.activeName}),key:t.path,onClick:n=>e.handleChangeView(t)},(0,a.zw)(t.name),11,h)))),128))])}var y=(0,i.aZ)({props:{styleList:Array,activeName:String},emits:["click"],setup(){const{proxy:e}=(0,i.FN)();function t(t){e.$emit("click",t.path,t.name)}return{handleChangeView:t}}}),I=n(89);const v=(0,I.Z)(y,[["render",p],["__scopeId","data-v-1358bd56"]]);var w=v,f=n(8045),P=n(754),S=n(2167),k=(0,i.aZ)({components:{YinIcon:g.Z,YinHeaderNav:w},setup(){const{proxy:e}=(0,i.FN)(),t=(0,d.oR)(),{changeIndex:n,routerManager:a}=(0,f.Z)(),s=(0,c.iH)(P.c6),o=(0,c.iH)(P.Vg),l=(0,c.iH)(P.$O),r=(0,c.iH)(P.u8),g=(0,c.qj)({ERJI:P.JO.ERJI}),m=(0,c.iH)(""),h=(0,i.Fl)((()=>t.getters.activeNavName)),p=(0,i.Fl)((()=>t.getters.userPic)),y=(0,i.Fl)((()=>t.getters.token));function I(e,t){e||t?(n(t),a(e,{path:e})):(n(P.ZF.Home),a(P.wC.Home,{path:P.wC.Home}))}function v(t){t==P.wC.SignOut?(e.$store.commit("setToken",!1),n(P.ZF.Home),a(P.wC.Home,{path:P.wC.Home})):a(t,{path:t})}function w(){""!==m.value?(e.$store.commit("setSearchWord",m.value),a(P.wC.Search,{path:P.wC.Search,query:{keywords:m.value}})):e.$message({message:"搜索内容不能为空",type:"error"})}return{musicName:s,headerNavList:o,signList:l,menuList:r,iconList:g,keywords:m,activeNavName:h,userPic:p,token:y,Search:u.Z,goPage:I,goMenuList:v,goSearch:w,attachImageUrl:S.x.attachImageUrl}}});const C=(0,I.Z)(k,[["render",r],["__scopeId","data-v-68985cd5"]]);var L=C;const N=e=>((0,i.dD)("data-v-214bf4ef"),e=e(),(0,i.Cn)(),e),x={key:0,class:"yin-current-play"},_=N((()=>(0,i._)("h2",{class:"title"},"当前播放",-1))),T={class:"control"},A={class:"menus"},H=["onClick"];function U(e,t,n,o,l,r){return(0,i.wg)(),(0,i.j4)(s.uT,{name:"aside-fade"},{default:(0,i.w5)((()=>[e.showAside?((0,i.wg)(),(0,i.iD)("div",x,[_,(0,i._)("div",T,"共 "+(0,a.zw)(e.currentPlayList&&e.currentPlayList.length||0)+" 首",1),(0,i._)("ul",A,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.currentPlayList,((t,n)=>((0,i.wg)(),(0,i.iD)("li",{class:(0,a.C_)({"is-play":e.songId===t.id}),key:n,onClick:i=>e.playMusic({id:t.id,url:t.url,pic:t.pic,index:n,name:t.name,lyric:t.lyric,currentSongList:e.currentPlayList})},(0,a.zw)(e.getSongTitle(t.name)),11,H)))),128))])])):(0,i.kq)("",!0)])),_:1})}var O=(0,i.aZ)({setup(){const{proxy:e}=(0,i.FN)(),t=(0,d.oR)(),{getSongTitle:n,playMusic:a}=(0,f.Z)(),s=(0,i.Fl)((()=>t.getters.songId)),o=(0,i.Fl)((()=>t.getters.currentPlayList)),l=(0,i.Fl)((()=>t.getters.showAside));return(0,i.bv)((()=>{document.addEventListener("click",(()=>{e.$store.commit("setShowAside",!1)}),!0)})),{songId:s,currentPlayList:o,showAside:l,getSongTitle:n,playMusic:a}}});const Z=(0,I.Z)(O,[["render",U],["__scopeId","data-v-214bf4ef"]]);var D=Z;const F={class:"control-box"},M={class:"info-box"},W={key:0},$={class:"song-info"},Y={class:"time-info"},J={class:"song-ctr"},b={class:"song-ctr song-edit"};function E(e,t,n,s,o,l){const r=(0,i.up)("yin-icon"),c=(0,i.up)("el-slider"),u=(0,i.up)("el-image"),d=(0,i.up)("el-dropdown-menu"),g=(0,i.up)("el-dropdown");return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["play-bar",{show:!e.toggle}])},[(0,i._)("div",{class:(0,a.C_)(["fold",{turn:e.toggle}])},[(0,i.Wm)(r,{icon:e.iconList.ZHEDIE,onClick:t[0]||(t[0]=t=>e.toggle=!e.toggle)},null,8,["icon"])],2),(0,i.Wm)(c,{class:"progress",modelValue:e.nowTime,"onUpdate:modelValue":t[1]||(t[1]=t=>e.nowTime=t),onChange:e.changeTime,size:"small"},null,8,["modelValue","onChange"]),(0,i._)("div",F,[(0,i._)("div",M,[(0,i.Wm)(u,{class:"song-bar-img",fit:"contain",src:e.attachImageUrl(e.songPic),onClick:e.goPlayerPage},null,8,["src","onClick"]),e.songId?((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("div",$,(0,a.zw)(this.songTitle)+" - "+(0,a.zw)(this.singerName),1),(0,i._)("div",Y,(0,a.zw)(e.startTime)+" / "+(0,a.zw)(e.endTime),1)])):(0,i.kq)("",!0)]),(0,i._)("div",J,[(0,i.Wm)(r,{class:"yin-play-show",icon:e.playStateList[e.playStateIndex],onClick:e.changePlayState},null,8,["icon","onClick"]),(0,i.Wm)(r,{class:"yin-play-show",icon:e.iconList.SHANGYISHOU,onClick:e.prev},null,8,["icon","onClick"]),(0,i.Wm)(r,{icon:e.playBtnIcon,onClick:e.togglePlay},null,8,["icon","onClick"]),(0,i.Wm)(r,{class:"yin-play-show",icon:e.iconList.XIAYISHOU,onClick:e.next},null,8,["icon","onClick"]),(0,i.Wm)(g,{class:"yin-play-show",trigger:"click"},{dropdown:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"yin-slider",style:{height:"150px",margin:"10px 0"},modelValue:e.volume,"onUpdate:modelValue":t[2]||(t[2]=t=>e.volume=t),vertical:!0},null,8,["modelValue"])])),_:1})])),default:(0,i.w5)((()=>[0!==e.volume?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:e.iconList.YINLIANG},null,8,["icon"])):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:e.iconList.JINGYIN},null,8,["icon"]))])),_:1})]),(0,i._)("div",b,[(0,i.Wm)(r,{class:(0,a.C_)(["yin-play-show",{active:e.isCollection}]),icon:e.isCollection?e.iconList.like:e.iconList.dislike,onClick:e.changeCollection},null,8,["class","icon","onClick"]),(0,i.Wm)(r,{class:"yin-play-show",icon:e.iconList.download,onClick:t[3]||(t[3]=t=>e.downloadMusic({songUrl:e.songUrl,songName:e.singerName+"-"+e.songTitle}))},null,8,["icon"]),(0,i.Wm)(r,{icon:e.iconList.LIEBIAO,onClick:e.changeAside},null,8,["icon","onClick"])])])],2)}var V=n(2024),z=(0,i.aZ)({components:{YinIcon:g.Z},setup(){const{proxy:e}=(0,i.FN)(),t=(0,d.oR)(),{routerManager:n,playMusic:a,checkStatus:s,downloadMusic:o}=(0,f.Z)(),l=(0,c.iH)(!1),r=(0,i.Fl)((()=>t.getters.userId)),u=(0,i.Fl)((()=>t.getters.songId)),g=(0,i.Fl)((()=>t.getters.token));async function m(){if(!s(!1))return;const e=r.value,t="0",n=u.value;l.value=(await S.x.isCollection({userId:e,type:t,songId:n})).data}async function h(){if(!s())return;const t=r.value,n="0",i=u.value,a=l.value?await S.x.deleteCollection(r.value,u.value):await S.x.setCollection({userId:t,type:n,songId:i});e.$message({message:a.message,type:a.type}),1!=a.data&&0!=a.data||(l.value=a.data)}return(0,i.YP)(u,(()=>{m()})),(0,i.YP)(g,(e=>{e||(l.value=!1)})),(0,i.bv)((()=>{u.value&&m()})),{isCollection:l,playMusic:a,routerManager:n,checkStatus:s,attachImageUrl:S.x.attachImageUrl,changeCollection:h,downloadMusic:o}},data(){return{startTime:"00:00",endTime:"00:00",nowTime:0,toggle:!0,volume:10,playState:P.JO.XUNHUAN,playStateList:[P.JO.XUNHUAN,P.JO.LUANXU],playStateIndex:0,iconList:{download:P.JO.XIAZAI,ZHEDIE:P.JO.ZHEDIE,SHANGYISHOU:P.JO.SHANGYISHOU,XIAYISHOU:P.JO.XIAYISHOU,YINLIANG:P.JO.YINLIANG1,JINGYIN:P.JO.JINGYIN,LIEBIAO:P.JO.LIEBIAO,dislike:P.JO.Dislike,like:P.JO.Like}}},computed:{...(0,d.Se)(["userId","isPlay","playBtnIcon","songId","songUrl","songTitle","singerName","songPic","curTime","duration","currentPlayList","currentPlayIndex","showAside","autoNext"])},watch:{isPlay(e){this.$store.commit("setPlayBtnIcon",e?P.JO.ZANTING:P.JO.BOFANG)},volume(){this.$store.commit("setVolume",this.volume/100)},curTime(){this.startTime=(0,V.ZC)(this.curTime),this.endTime=(0,V.ZC)(this.duration),this.nowTime=this.curTime/this.duration*100},autoNext(){this.next()}},methods:{changeAside(){this.$store.commit("setShowAside",!this.showAside)},togglePlay(){this.$store.commit("setIsPlay",!this.isPlay)},changeTime(){this.$store.commit("setChangeTime",this.duration*(.01*this.nowTime))},changePlayState(){this.playStateIndex=this.playStateIndex>=this.playStateList.length-1?0:++this.playStateIndex,this.playState=this.playStateList[this.playStateIndex]},prev(){if(this.playState===P.JO.LUANXU){let e=Math.floor(Math.random()*this.currentPlayList.length);e=e===this.currentPlayIndex?e+1:e,this.$store.commit("setCurrentPlayIndex",e),this.toPlay(this.currentPlayList[e].url)}else-1!==this.currentPlayIndex&&this.currentPlayList.length>1&&(this.currentPlayIndex>0?(this.$store.commit("setCurrentPlayIndex",this.currentPlayIndex-1),this.toPlay(this.currentPlayList[this.currentPlayIndex].url)):(this.$store.commit("setCurrentPlayIndex",this.currentPlayList.length-1),this.toPlay(this.currentPlayList[this.currentPlayIndex].url)))},next(){if(this.playState===P.JO.LUANXU){let e=Math.floor(Math.random()*this.currentPlayList.length);e=e===this.currentPlayIndex?e+1:e,this.$store.commit("setCurrentPlayIndex",e),this.toPlay(this.currentPlayList[e].url)}else-1!==this.currentPlayIndex&&this.currentPlayList.length>1&&(this.currentPlayIndex<this.currentPlayList.length-1?(this.$store.commit("setCurrentPlayIndex",this.currentPlayIndex+1),this.toPlay(this.currentPlayList[this.currentPlayIndex].url)):(this.$store.commit("setCurrentPlayIndex",0),this.toPlay(this.currentPlayList[0].url)))},toPlay(e){if(e&&e!==this.songUrl){const t=this.currentPlayList[this.currentPlayIndex];this.playMusic({id:t.id,url:e,pic:t.pic,index:this.currentPlayIndex,name:t.name,lyric:t.lyric,currentSongList:this.currentPlayList})}},goPlayerPage(){this.routerManager(P.wC.Lyric,{path:`${P.wC.Lyric}/${this.songId}`})}}});const G=(0,I.Z)(z,[["render",E],["__scopeId","data-v-d5c10304"]]);var j=G;const X=e=>((0,i.dD)("data-v-0867030a"),e=e(),(0,i.Cn)(),e),q=X((()=>(0,i._)("div",{class:"box-in"},null,-1))),B=[q];function R(e,t,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",{class:"scroll-top",onClick:t[0]||(t[0]=(...t)=>e.returnTop&&e.returnTop(...t))},B)}var K=(0,i.aZ)({setup(){function e(){let e=null;cancelAnimationFrame(e);const t=new Date,n=document.body.scrollTop||document.documentElement.scrollTop,i=500;e=requestAnimationFrame((function a(){const s=(new Date).valueOf()-t.valueOf(),o=i-Math.max(0,i-s);document.documentElement.scrollTop=document.body.scrollTop=n-o*n/i,e=requestAnimationFrame(a),o===i&&cancelAnimationFrame(e)}))}return{returnTop:e}}});const Q=(0,I.Z)(K,[["render",R],["__scopeId","data-v-0867030a"]]);var ee=Q;const te={class:"yin-footer"};function ne(e,t,n,s,o,l){return(0,i.wg)(),(0,i.iD)("div",te,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.footerList,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{key:t},(0,a.zw)(e),1)))),128))])}var ie=(0,i.aZ)({setup(){const e=(0,c.OT)(["关于 | 帮助 | 条款 | 反馈","Copyright © 2019 Yin-Hongwei"]);return{footerList:e}}});const ae=(0,I.Z)(ie,[["render",ne],["__scopeId","data-v-1afc7fbb"]]);var se=ae;const oe=["src"];function le(e,t,n,a,s,o){return(0,i.wg)(),(0,i.iD)("audio",{src:e.attachImageUrl(e.songUrl),controls:"controls",ref:e.player,preload:"true",onCanplay:t[0]||(t[0]=(...t)=>e.canplay&&e.canplay(...t)),onTimeupdate:t[1]||(t[1]=(...t)=>e.timeupdate&&e.timeupdate(...t)),onEnded:t[2]||(t[2]=(...t)=>e.ended&&e.ended(...t))},null,40,oe)}var re=(0,i.aZ)({setup(){const{proxy:e}=(0,i.FN)(),t=(0,d.oR)(),n=(0,c.iH)(),a=e=>{n.value=e},s=(0,i.Fl)((()=>t.getters.songUrl)),o=(0,i.Fl)((()=>t.getters.isPlay)),l=(0,i.Fl)((()=>t.getters.volume)),r=(0,i.Fl)((()=>t.getters.changeTime)),u=(0,i.Fl)((()=>t.getters.autoNext));function g(){o.value?n.value.play():n.value.pause()}function m(){e.$store.commit("setDuration",n.value.duration),n.value.play(),e.$store.commit("setIsPlay",!0)}function h(){e.$store.commit("setCurTime",n.value.currentTime)}function p(){e.$store.commit("setIsPlay",!1),e.$store.commit("setCurTime",0),e.$store.commit("setAutoNext",!u.value)}return(0,i.YP)(o,(()=>g())),(0,i.YP)(r,(()=>n.value.currentTime=r.value)),(0,i.YP)(l,(e=>n.value.volume=e)),{songUrl:s,player:a,canplay:m,timeupdate:h,ended:p,attachImageUrl:S.x.attachImageUrl}}});const ce=(0,I.Z)(re,[["render",le],["__scopeId","data-v-1d4ddd4a"]]);var ue=ce,de=(0,i.aZ)({setup(e){const{proxy:t}=(0,i.FN)();return sessionStorage.getItem("dataStore")&&t.$store.replaceState(Object.assign({},t.$store.state,JSON.parse(sessionStorage.getItem("dataStore")))),window.addEventListener("beforeunload",(()=>{sessionStorage.setItem("dataStore",JSON.stringify(t.$store.state))})),(e,t)=>{const n=(0,i.up)("el-header"),a=(0,i.up)("router-view"),s=(0,i.up)("el-main"),o=(0,i.up)("el-footer"),l=(0,i.up)("el-container");return(0,i.wg)(),(0,i.j4)(l,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)(L)])),_:1}),(0,i.Wm)(s,null,{default:(0,i.w5)((()=>[(0,i.Wm)(a),(0,i.Wm)(D),(0,i.Wm)(j),(0,i.Wm)(ee),(0,i.Wm)(ue)])),_:1}),(0,i.Wm)(o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(se)])),_:1})])),_:1})}}});const ge=(0,I.Z)(de,[["__scopeId","data-v-0e1066d7"]]);var me=ge}}]);
//# sourceMappingURL=0.25e2f8dd.js.map