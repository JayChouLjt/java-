"use strict";(self["webpackChunkmusic_client"]=self["webpackChunkmusic_client"]||[]).push([[929],{2024:function(t,e,n){function o(t){if(null==t||""==t)return"";const e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,l=e.getDate()<10?"0"+e.getDate():e.getDate();return n+"-"+o+"-"+l}function l(t){if(null==t||""==t)return"";const e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,l=e.getDate()<10?"0"+e.getDate():e.getDate(),i=e.getHours()<10?"0"+e.getHours():e.getHours(),r=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return n+"-"+o+"-"+l+" "+i+":"+r+":"+a}function i(t){let e=t.split("\n");const n=/\[\d{2}:\d{2}.(\d{3}|\d{2})\]/g,o=[];if(!/\[.+\]/.test(t))return[[0,t]];while(!n.test(e[0]))e=e.slice(1);0===e[e.length-1].length&&e.pop();for(const l of e){const t=l.match(n),e=l.replace(n,"");for(const n of t){const t=n.slice(1,-1).split(":");""!==e&&o.push([60*parseInt(t[0],10)+parseFloat(t[1]),e])}}return o.sort(((t,e)=>t[0]-e[0])),o}function r(t){let e=parseInt(t),n=0,o=0;e>60&&(n=parseInt((e/60).toString()),e=parseInt((e%60).toString()),n>60&&(o=parseInt((n/60).toString()),n=60));let l="";return l=parseInt(e.toString())<10?"0:0"+parseInt(e.toString()):"0:"+parseInt(e.toString()),n>0&&(l=parseInt(e.toString())<10?"0"+parseInt(e.toString()):parseInt(e.toString()).toString(),l=parseInt(n.toString())+":"+l),o>0&&(l=parseInt(e.toString())<10?"0"+parseInt(e.toString()):parseInt(e.toString()).toString(),l=parseInt(o.toString())+":"+parseInt(n.toString())+":"+l),l}n.d(e,{oy:function(){return o},p6:function(){return l},zu:function(){return i},ZC:function(){return r}})},6319:function(t,e,n){n.d(e,{Z:function(){return M}});var o=n(3396);const l={class:"content"},i=(0,o.Uk)("下载"),r=(0,o.Uk)("删除");function a(t,e,n,a,s,u){const c=(0,o.up)("el-table-column"),g=(0,o.up)("MoreFilled"),d=(0,o.up)("el-icon"),p=(0,o.up)("el-dropdown-item"),w=(0,o.up)("el-dropdown-menu"),m=(0,o.up)("el-dropdown"),f=(0,o.up)("el-table");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(f,{"highlight-current-row":"",data:t.dataList,onRowClick:t.handleClick},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{prop:"songName",label:"歌曲"}),(0,o.Wm)(c,{prop:"singerName",label:"歌手"}),(0,o.Wm)(c,{prop:"introduction",label:"专辑"}),(0,o.Wm)(c,{label:"编辑",width:"80",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(m,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{icon:t.Download,onClick:n=>t.downloadMusic({songUrl:e.row.url,songName:e.row.name})},{default:(0,o.w5)((()=>[i])),_:2},1032,["icon","onClick"]),t.show?((0,o.wg)(),(0,o.j4)(p,{key:0,icon:t.Delete,onClick:n=>t.deleteCollection({id:e.row.id})},{default:(0,o.w5)((()=>[r])),_:2},1032,["icon","onClick"])):(0,o.kq)("",!0)])),_:2},1024)])),default:(0,o.w5)((()=>[(0,o.Wm)(d,{onClick:n=>t.handleEdit(e.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data","onRowClick"])])}var s=n(4870),u=n(9749),c=n(8045),g=n(9092),d=n(547),p=n(6854);const w=(0,o.aZ)({name:"Download"}),m={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},f=(0,o._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 110 64H160a32 32 0 110-64zm384-253.696l236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),h=[f];function S(t,e,n,l,i,r){return(0,o.wg)(),(0,o.iD)("svg",m,h)}var D=(0,p.Z)(w,[["render",S]]),k=n(2167),I=n(754),_=(0,o.aZ)({components:{MoreFilled:g.Z},props:{songList:Array,show:{default:!1}},emits:["changeData"],setup(t){const{getSongTitle:e,getSingerName:n,playMusic:l,checkStatus:i,downloadMusic:r}=(0,c.Z)(),{proxy:a}=(0,o.FN)(),g=(0,u.oR)(),{songList:p}=(0,s.BK)(t),w=(0,s.qj)({dislike:I.JO.Dislike,like:I.JO.Like}),m=(0,o.Fl)((()=>g.getters.songUrl)),f=(0,o.Fl)((()=>g.getters.singerName)),h=(0,o.Fl)((()=>g.getters.songTitle)),S=(0,o.Fl)((()=>{const t=[];return p.value.forEach(((o,l)=>{o["songName"]=e(o.name),o["singerName"]=n(o.name),o["index"]=l,t.push(o)})),t}));function _(t){l({id:t.id,url:t.url,pic:t.pic,index:t.index,name:t.name,lyric:t.lyric,currentSongList:p.value})}function v(t){console.log("row",t)}const C=(0,o.Fl)((()=>g.getters.userId));async function M({id:t}){if(!i())return;const e=await k.x.deleteCollection(C.value,t);a.$message({message:e.message,type:e.type}),!1===e.data&&a.$emit("changeData",e.data)}return{dataList:S,iconList:w,Delete:d.Z,Download:D,songUrl:m,singerName:f,songTitle:h,handleClick:_,handleEdit:v,downloadMusic:r,deleteCollection:M}}}),v=n(89);const C=(0,v.Z)(_,[["render",a],["__scopeId","data-v-05112f65"]]);var M=C},3929:function(t,e,n){n.r(e),n.d(e,{default:function(){return D}});var o=n(3396),l=n(7139);const i=t=>((0,o.dD)("data-v-038d5159"),t=t(),(0,o.Cn)(),t),r={class:"album-info"},a=i((()=>(0,o._)("h2",null,"基本资料",-1))),s={key:0};function u(t,e,n,i,u,c){const g=(0,o.up)("el-image"),d=(0,o.up)("el-aside"),p=(0,o.up)("song-list"),w=(0,o.up)("el-main"),m=(0,o.up)("el-container");return(0,o.wg)(),(0,o.j4)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"album-slide"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"singer-img",fit:"contain",src:t.attachImageUrl(t.songDetails.pic)},null,8,["src"]),(0,o._)("div",r,[a,(0,o._)("ul",null,[2!==t.songDetails.sex?((0,o.wg)(),(0,o.iD)("li",s,"性别："+(0,l.zw)(t.getUserSex(t.songDetails.sex)),1)):(0,o.kq)("",!0),(0,o._)("li",null,"生日："+(0,l.zw)(t.getBirth(t.songDetails.birth)),1),(0,o._)("li",null,"故乡："+(0,l.zw)(t.songDetails.location),1)])])])),_:1}),(0,o.Wm)(w,{class:"album-main"},{default:(0,o.w5)((()=>[(0,o._)("h1",null,(0,l.zw)(t.songDetails.name),1),(0,o._)("p",null,(0,l.zw)(t.songDetails.introduction),1),(0,o.Wm)(p,{songList:t.currentSongList},null,8,["songList"])])),_:1})])),_:1})}var c=n(4870),g=n(9749),d=n(8045),p=n(6319),w=n(2167),m=n(2024),f=(0,o.aZ)({components:{SongList:p.Z},setup(){const t=(0,g.oR)(),{getUserSex:e}=(0,d.Z)(),n=(0,c.iH)([]),l=(0,o.Fl)((()=>t.getters.songDetails));return(0,o.bv)((async()=>{try{const t=await w.x.getSongOfSingerId(l.value.id);n.value=t.data}catch(t){console.error(t)}})),{songDetails:l,currentSongList:n,attachImageUrl:w.x.attachImageUrl,getBirth:m.oy,getUserSex:e}}}),h=n(89);const S=(0,h.Z)(f,[["render",u],["__scopeId","data-v-038d5159"]]);var D=S}}]);
//# sourceMappingURL=929.3a54d235.js.map